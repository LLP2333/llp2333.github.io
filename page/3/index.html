<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.1"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LLP2333's Blog</title>
<meta name=description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta name=author content="LLP2333"><link rel=canonical href=https://qvqw.date/><link crossorigin=anonymous href=/assets/css/stylesheet.6768305d57ef9dde35fe7a906663cb72a91a7834da183a72dfa650727b24edad.css integrity="sha256-Z2gwXVfvnd41/nqQZmPLcqkaeDTaGDpy36ZQcnsk7a0=" rel="preload stylesheet" as=style><link rel=icon href=https://qvqw.date/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qvqw.date/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qvqw.date/favicon-32x32.png><link rel=apple-touch-icon href=https://qvqw.date/apple-touch-icon.png><link rel=mask-icon href=https://qvqw.date/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://qvqw.date/index.xml><link rel=alternate type=application/json href=https://qvqw.date/index.json><link rel=alternate hreflang=en href=https://qvqw.date/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1484883908523999" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-C7KJKRXB75"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-C7KJKRXB75")}</script><meta property="og:url" content="https://qvqw.date/"><meta property="og:site_name" content="LLP2333's Blog"><meta property="og:title" content="LLP2333's Blog"><meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://qvqw.date/images/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://qvqw.date/images/papermod-cover.png"><meta name=twitter:title content="LLP2333's Blog"><meta name=twitter:description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"LLP2333's Blog","url":"https://qvqw.date/","description":"Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod","logo":"https://qvqw.date/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class="header glass-header"><nav class="nav glass-nav"><div class=logo><a href=https://qvqw.date/ accesskey=h title="LLP2333's Blog (Alt + H)">LLP2333's Blog</a><div class=logo-switches><button id=theme-toggle class=btn-glass accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qvqw.date/ title=首页><span class=active>首页</span></a></li><li><a href=https://qvqw.date/archives/ title=归档><span>归档</span></a></li><li><a href=https://qvqw.date/categories/ title=分类><span>分类</span></a></li><li><a href=https://qvqw.date/tags/ title=标签><span>标签</span></a></li><li><a href=https://qvqw.date/search/ title=搜索><span>搜索</span></a></li><li><a href=https://qvqw.date/link/ title=友链><span>友链</span></a></li><li><a href=https://qvqw.date/about/ title=关于><span>关于</span></a></li><li><a href=https://qvqw.date/contact/ title=联系><span>联系</span></a></li><li><a href=https://github.com/LLP2333/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class="main glass-container"><article class="post-entry glass-card"><header class=entry-header><h2 class=entry-hint-parent>Java的ResourceBundle读取配置文件路径</h2></header><div class=entry-content><p>当你使用
// 1. 创建或加载 ResourceBundle ResourceBundle bundle = ResourceBundle.getBundle("messages"); // 从 classpath 加载 messages.properties // 2. 使用getString()获取字符串值 String value = bundle.getString("key.name"); 读取文件时 代码默认会读取src/main/resources/messages.properties
src/main/resources/messages.properties // 默认 src/main/resources/messages_zh.properties // 中文 src/main/resources/messages_en.properties // 英文 样例配置文件
key.name=值 welcome.message=欢迎 error.code=500 如果想指定读取的文件
// 指定英文 Locale Locale enLocale = new Locale("en"); // 或者直接用 Locale.ENGLISH // 加载英文资源包 ResourceBundle bundle = ResourceBundle.getBundle("messages", enLocale); // 获取英文值 String value = bundle.getString("key.name");</p></div><footer class=entry-footer><span title='2025-01-08 16:06:02 +0800 +0800'>January 8, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;LLP2333</footer><a class=entry-link aria-label="post link to Java的ResourceBundle读取配置文件路径" href=https://qvqw.date/posts/java%E7%9A%84resourcebundle%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84/></a></article><article class="post-entry glass-card"><header class=entry-header><h2 class=entry-hint-parent>某云办公应用api存在IP白名单绕过风险</h2></header><div class=entry-content><p>最近在做一个消息推送企业某信的需求，使用的不是官方的api,而是和企业某信可以集成的云办公平台的api。由于api有ip白名单限制，导致我必须在特定化网络环境下发请求，测试很麻烦，所以想测试一下能不能绕过限制。 想要绕过限制，首先要知道服务器如何获取发送者的ip。
服务器如何获取请求者ip 获取请求者 IP 本质上就两个来源：
直接从 IP 数据包获取 这就是 HttpServletRequest的getRemoteAddr() 的工作原理，获取的是直接与服务器建立 TCP 连接的客户端 IP，在没有代理的情况下,这就是真实的客户端 IP 从 HTTP 请求头获取 常见的请求头有: X-Forwarded-For X-Real-IP Proxy-Client-IP WL-Proxy-Client-IP 测试 这里我使用了postman伪造了请求头X-Forwarded-For，经过测试，理论上只要知道正确的ip，就可以让ip白名单功能失效。
如果你有服务器的访问权限，但是只知道服务器的内网ip，可以尝试
curl ifconfig.me 然后就能得到服务器的公网ip了
安全建议 改用网络层的源IP地址(TCP/IP报文中的source IP)进行验证
如果必须使用代理转发,建议只信任内部代理服务器传递的XFF头
吐槽 某云办公平台必须付费才能获得访问api的密钥，并且密钥只有一个，测试只能直接在正式系统测</p></div><footer class=entry-footer><span title='2025-01-08 10:14:16 +0800 +0800'>January 8, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;LLP2333</footer><a class=entry-link aria-label="post link to 某云办公应用api存在IP白名单绕过风险" href=https://qvqw.date/posts/%E6%9F%90%E4%BA%91%E5%8A%9E%E5%85%AC%E5%BA%94%E7%94%A8api%E5%AD%98%E5%9C%A8ip%E7%99%BD%E5%90%8D%E5%8D%95%E7%BB%95%E8%BF%87%E9%A3%8E%E9%99%A9/></a></article><article class="post-entry glass-card"><header class=entry-header><h2 class=entry-hint-parent>用go写了个简化hugo文章创建的小工具</h2></header><div class=entry-content><p>目前使用hugo作为博客系统，使用typora作为博客的编辑器。书接上文Hugo使用技巧，之前每次都需要在博客根目录执行
hugo new posts/文章标题/index.md 创建新的文章。感觉很麻烦。所以想写个工具简化这个过程。
思路 输入文件标题后执行创建文章的命令，然后生成新的文章的快捷方式，方便使用typora进行编辑。
代码 使用Claude生成的，很方便。
如果是windows平台，使用
go build -o HugoHelper.exe main.go 进行编译。
使用前需要配置blog环境变量，key为blog,value为你的项目的根路径
比如我的根目录是C:\UGit\qvqw.date
代码
package main import ( "bufio" "fmt" "os" "os/exec" "path/filepath" "strings" ) func main() { // 获取当前程序执行路径 execPath, err := os.Getwd() if err != nil { fmt.Printf("错误: 获取当前路径失败: %v\n", err) os.Exit(1) } // 从环境变量获取博客路径 blogPath := os.Getenv("blog") if blogPath == "" { fmt.Println("错误: 环境变量 'blog' 未设置") os.Exit(1) } // 验证博客路径是否存在 if _, err := os.Stat(blogPath); os.IsNotExist(err) { fmt.Printf("错误: 博客路径不存在: %s\n", blogPath) os.Exit(1) } // 获取用户输入的文章标题 reader := bufio.NewReader(os.Stdin) fmt.Print("请输入文章标题: ") title, err := reader.ReadString('\n') if err != nil { fmt.Printf("错误: 读取输入失败: %v\n", err) os.Exit(1) } // 清理标题（移除空白字符和换行符） title = strings.TrimSpace(title) if title == "" { fmt.Println("错误: 标题不能为空") os.Exit(1) } // 构建 hugo 命令 cmd := exec.Command("hugo", "new", fmt.Sprintf("posts/%s/index.md", title)) cmd.Dir = blogPath cmd.Stdout = os.Stdout cmd.Stderr = os.Stderr // 执行命令 if err := cmd.Run(); err != nil { fmt.Printf("错误: 创建文章失败: %v\n", err) os.Exit(1) } // 源文件路径（Hugo 创建的文件） sourceFile := filepath.Join(blogPath, "content", "posts", title, "index.md") // 目标软链接路径（在当前目录） linkName := filepath.Join(execPath, fmt.Sprintf("%s.md", title)) // 删除已存在的软链接（如果有的话） _ = os.Remove(linkName) // 创建软链接 err = os.Symlink(sourceFile, linkName) if err != nil { fmt.Printf("警告: 创建软链接失败: %v\n", err) } else { fmt.Printf("成功创建软链接: %s -> %s\n", linkName, sourceFile) } fmt.Printf("成功创建文章: %s\n", sourceFile) // 等待用户按回车键后退出 waitExit := bufio.NewReader(os.Stdin) fmt.Print("按回车键退出...") waitExit.ReadString('\n') } 注意 如果无法创建软链接，请使用管理员权限运行。
...</p></div><footer class=entry-footer><span title='2025-01-07 14:11:52 +0800 +0800'>January 7, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;LLP2333</footer><a class=entry-link aria-label="post link to 用go写了个简化hugo文章创建的小工具" href=https://qvqw.date/posts/%E7%94%A8go%E5%86%99%E4%BA%86%E4%B8%AA%E7%AE%80%E5%8C%96hugo%E6%96%87%E7%AB%A0%E5%88%9B%E5%BB%BA%E7%9A%84%E5%B0%8F%E5%B7%A5%E5%85%B7/></a></article><article class="post-entry glass-card"><header class=entry-header><h2 class=entry-hint-parent>Spring Boot 快速上手 JPA</h2></header><div class=entry-content><p>非原创，原文地址https://github.com/CodingDocs/springboot-guide/blob/master/docs/basis/springboot-jpa.md
JPA 这部分内容上手很容易，但是涉及到的东西还是挺多的，网上大部分关于 JPA 的资料都不是特别齐全，大部分用的版本也是比较落后的。另外，我下面讲到了的内容也不可能涵盖所有 JPA 相关内容，我只是把自己觉得比较重要的知识点总结在了下面。我自己也是参考着官方文档写的，官方文档非常详细了，非常推荐阅读一下。这篇文章可以帮助对 JPA 不了解或者不太熟悉的人来在实际项目中正确使用 JPA。
项目代码基于 Spring Boot 最新的 2.1.9.RELEASE 版本构建（截止到这篇文章写完），另外，新建项目就不多说了，前面的文章已经很详细介绍过。
1.相关依赖 我们需要下面这些依赖支持我们完成这部分内容的学习：
&lt;dependencies> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-jpa&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>mysql&lt;/groupId> &lt;artifactId>mysql-connector-java&lt;/artifactId> &lt;scope>runtime&lt;/scope> &lt;/dependency> &lt;dependency> &lt;groupId>org.projectlombok&lt;/groupId> &lt;artifactId>lombok&lt;/artifactId> &lt;optional>true&lt;/optional> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-test&lt;/artifactId> &lt;scope>test&lt;/scope> &lt;/dependency> &lt;/dependencies> 2.配置数据库连接信息和JPA配置 由于使用的是 h2 内存数据库，所以你直接运行项目数据库就会自动创建好。
下面的配置中需要单独说一下 spring.jpa.hibernate.ddl-auto=create这个配置选项。
这个属性常用的选项有四种：
create:每次重新启动项目都会重新创新表结构，会导致数据丢失 create-drop:每次启动项目创建表结构，关闭项目删除表结构 update:每次启动项目会更新表结构 validate:验证表结构，不对数据库进行任何更改 但是，一定要不要在生产环境使用 ddl 自动生成表结构，一般推荐手写 SQL 语句配合 Flyway 来做这些事情。
# 数据库url地址 spring.datasource.url=jdbc:h2:mem:jpa-demo spring.datasource.username=root spring.datasource.password=123456 spring.datasource.platform=h2 spring.datasource.driverClassName =org.h2.Driver spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true # 打印出 sql 语句 spring.jpa.show-sql=true spring.jpa.hibernate.ddl-auto=update spring.jpa.open-in-view=false server.port=8080 #H2控制台 spring.h2.console.enabled=true 3.实体类 我们为这个类添加了 @Entity 注解代表它是数据库持久化类，还配置了主键 id。
...</p></div><footer class=entry-footer><span title='2024-11-18 08:56:28 +0800 +0800'>November 18, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;LLP2333</footer><a class=entry-link aria-label="post link to Spring Boot 快速上手 JPA" href=https://qvqw.date/posts/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8Bspring-jpa/></a></article><article class="post-entry glass-card"><header class=entry-header><h2 class=entry-hint-parent>使用cpolar为rock5A进行内网穿透</h2></header><div class=entry-content><p>使用 cpolar 为 rock 5A 进行内网穿透 github 上有开源的 frp 项目，如果有一台云服务器的话，用来内网穿透很不错。但是，使用云服务+frp 的方案，开放某个端口，还需要去修改云服务的安全组，比较麻烦。考虑到方便性，我用了 cpolar 做内网穿透。
注：rock 5A 为 arm 开发板，系统为 debian12（和树莓派、香橙派等 arm 计算机的教程理论上通用）
安装 我这里使用的官方的一键安装脚本
curl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash 授权 执行下面 的命令进行授权（授权码在 cpolar 验证页面获取）
cpolar authtoken xxxxxxxxxxxxxxxxxx 设置开机自启动并启动 cpolar 服务 systemctl enable cpolar systemctl start cpolar 完成上面的内容就基本上配置好了,你可以在 cpolar 官网的状态页面看到你的 ssh 隧道，可以通过该域名和端口远程访问本地的 rock 5A
注意：cpolar 默认会配置本地机器 ssh 的 内网穿透，如需定制自己的内网穿透，请尝试根据官网文档修改配置文件。免费的内网穿透会在机器重启后变更域名和端口，重启后可以从 cpolar 官网状态页面获取，也可以考虑升级付费用户。
配置文件 默认的配置文件在
/usr/local/etc/cpolar/cpolar.yml 补充说明 使用过程中，我发现 cpolar 代理 http 导致了 rock 5A 的 cpu 占用飙升。后续我用了阿里云的服务器+frp 代理了 ssh,cloudflare tunnel 代理 http，cpu 占用几乎忽略不计。因此，建议 cpolar 内网穿透方案仅作备选。
...</p></div><footer class=entry-footer><span title='2024-04-13 17:35:54 +0800 +0800'>April 13, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;LLP2333</footer><a class=entry-link aria-label="post link to 使用cpolar为rock5A进行内网穿透" href=https://qvqw.date/posts/%E4%BD%BF%E7%94%A8cpolar%E4%B8%BArock5a%E8%BF%9B%E8%A1%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://qvqw.date/page/2/>«&nbsp;Prev&nbsp;2/5
</a><a class=next href=https://qvqw.date/page/4/>Next&nbsp;4/5&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://qvqw.date/>LLP2333's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=policy-links><span><a href=https://qvqw.date/privacy>Privacy Policy</a> |
<a href=https://qvqw.date/cookies>Cookie Policy</a> |
<a href=https://qvqw.date/terms>Terms of Service</a> |
<a href=https://qvqw.date/disclaimer>Disclaimer</a></span></div></footer><style>.policy-links{margin-top:8px;font-size:.9em;opacity:.8}.policy-links a{color:var(--secondary);text-decoration:none;margin:0 4px}.policy-links a:hover{color:var(--primary);text-decoration:underline}</style></body></html>