<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Linux on LLP2333&#39;s Blog</title>
    <link>https://qvqw.date/categories/linux/</link>
    <description>Recent content in Linux on LLP2333&#39;s Blog</description>
    <image>
      <title>LLP2333&#39;s Blog</title>
      <url>https://qvqw.date/images/papermod-cover.png</url>
      <link>https://qvqw.date/images/papermod-cover.png</link>
    </image>
    <generator>Hugo -- 0.147.1</generator>
    <language>en</language>
    <lastBuildDate>Thu, 15 Jan 2026 19:03:01 +0800</lastBuildDate>
    <atom:link href="https://qvqw.date/categories/linux/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>记一次为rock5A从官方debian迁移到armbian系统,开机自启wifi热点</title>
      <link>https://qvqw.date/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%B8%BArock5a%E4%BB%8E%E5%AE%98%E6%96%B9debian%E8%BF%81%E7%A7%BB%E5%88%B0armbian%E7%B3%BB%E7%BB%9F/</link>
      <pubDate>Thu, 15 Jan 2026 19:03:01 +0800</pubDate>
      <guid>https://qvqw.date/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%B8%BArock5a%E4%BB%8E%E5%AE%98%E6%96%B9debian%E8%BF%81%E7%A7%BB%E5%88%B0armbian%E7%B3%BB%E7%BB%9F/</guid>
      <description>&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;
&lt;p&gt;最近想使用F50随身wifi和rock5A做一个随时可以玩任天堂splatoon3的加速器热点.
已知F50可以和rock5A通过数据线共享网络&lt;/p&gt;
&lt;p&gt;大概的思路&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;rock&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;A无线网卡的wifi热点-&amp;gt;rock&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;A代理软件-&amp;gt;F&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;-&amp;gt;互联网&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是折腾了很久,我的rock5A的Ax210的网卡驱动一直有问题,日志里面提示ucode错误.我感觉官方的debian系统驱动没有armbian丰富.
为此,我决定迁移系统到Armbian,还买了一个radaxa官方的A8无线网卡.&lt;/p&gt;
&lt;h1 id=&#34;需要的材料&#34;&gt;需要的材料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;随身wifi F50&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;rock5A&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;radxa无线网卡A8&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A to C数据线(连接F50和rock5A)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;micro SD卡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;emmc模块&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网线&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网线转type-C&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SD卡读卡器&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;系统要求&#34;&gt;系统要求&lt;/h1&gt;
&lt;p&gt;旧的系统使用的是官方的debian12&lt;/p&gt;
&lt;p&gt;新系统这里我使用的是Armbian_25.2.3_Rock-5a_noble_vendor_6.1.99.img.xz&lt;/p&gt;
&lt;p&gt;新系统镜像下载地址https://armbian.lv.auroradev.org/dl/rock-5a/archive/&lt;/p&gt;
&lt;h2 id=&#34;制作系统&#34;&gt;制作系统&lt;/h2&gt;
&lt;p&gt;前面的系统下载完成后,就可以制作系统了.我之前的系统在emmc上保存的,默认情况下sd卡的系统启动的优先级高于emmc.
我之前的系统在emmc上面,我的思路是在SD卡上创建新的系统,配置好系统后再使用dd命令,将sd卡的系统覆盖到emmc.
这里需要注意,sd卡的容量最好低于emmc的容量.
制作镜像我使用的是这个软件
&lt;img alt=&#34;image-20260115192916471&#34; loading=&#34;lazy&#34; src=&#34;https://minioapi.qvqw.date/qvqw/2026/01/image-20260115192916471.webp&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;启动系统&#34;&gt;启动系统&lt;/h2&gt;
&lt;p&gt;将SD卡插入rock5A,然后使用网线连接到路由器,确保电脑和rock5a在同一个局域网.然后就可以登录路由器后台获取rock5a的ip,在电脑使用ssh连接开发版&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Armbian的默认账户是 root，默认密码通常是 1234
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;换源&#34;&gt;换源&lt;/h2&gt;
&lt;p&gt;需要对两个文件进行换源&lt;/p&gt;
&lt;p&gt;armbain&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@rock-5a:/etc/apt/sources.list.d# cat armbian.sources 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/armbian
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main noble-utils noble-desktop
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/armbian.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@rock-5a:/etc/apt/sources.list.d# 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ubuntu&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@rock-5a:/etc/apt/sources.list.d# cat armbian.sources 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/armbian
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main noble-utils noble-desktop
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/armbian.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@rock-5a:/etc/apt/sources.list.d# cat ubuntu.sources 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble noble-updates noble-backports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb-src
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble noble-updates noble-backports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble-security
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Types: deb-src
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Suites: noble-security
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Components: main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;设置ipv4转发&#34;&gt;设置ipv4转发&lt;/h2&gt;
&lt;p&gt;创建wifi热点需要开启转发功能&lt;/p&gt;</description>
    </item>
    <item>
      <title>使用cpolar为rock5A进行内网穿透</title>
      <link>https://qvqw.date/posts/%E4%BD%BF%E7%94%A8cpolar%E4%B8%BArock5a%E8%BF%9B%E8%A1%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</link>
      <pubDate>Sat, 13 Apr 2024 17:35:54 +0800</pubDate>
      <guid>https://qvqw.date/posts/%E4%BD%BF%E7%94%A8cpolar%E4%B8%BArock5a%E8%BF%9B%E8%A1%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</guid>
      <description>&lt;h1 id=&#34;使用-cpolar-为-rock-5a-进行内网穿透&#34;&gt;使用 cpolar 为 rock 5A 进行内网穿透&lt;/h1&gt;
&lt;p&gt;github 上有开源的 frp 项目，如果有一台云服务器的话，用来内网穿透很不错。但是，使用云服务+frp 的方案，开放某个端口，还需要去修改云服务的安全组，比较麻烦。考虑到方便性，我用了 cpolar 做内网穿透。&lt;/p&gt;
&lt;p&gt;注：rock 5A 为 arm 开发板，系统为 debian12（和树莓派、香橙派等 arm 计算机的教程理论上通用）&lt;/p&gt;
&lt;h2 id=&#34;安装&#34;&gt;安装&lt;/h2&gt;
&lt;p&gt;我这里使用的官方的一键安装脚本&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;curl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;授权&#34;&gt;授权&lt;/h2&gt;
&lt;p&gt;执行下面 的命令进行授权（授权码在 cpolar 验证页面获取）&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cpolar authtoken xxxxxxxxxxxxxxxxxx
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;设置开机自启动并启动-cpolar-服务&#34;&gt;设置开机自启动并启动 cpolar 服务&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;systemctl enable cpolar
systemctl start cpolar
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;完成上面的内容就基本上配置好了,你可以在 cpolar 官网的状态页面看到你的 ssh 隧道，可以通过该域名和端口远程访问本地的 rock 5A&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20240413180045405&#34; loading=&#34;lazy&#34; src=&#34;https://minioapi.qvqw.date/qvqw/2025/6/19/cpolar.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;注意：cpolar 默认会配置本地机器 ssh 的 内网穿透，如需定制自己的内网穿透，请尝试根据官网文档修改配置文件。免费的内网穿透会在机器重启后变更域名和端口，重启后可以从 cpolar 官网状态页面获取，也可以考虑升级付费用户。&lt;/p&gt;
&lt;h2 id=&#34;配置文件&#34;&gt;配置文件&lt;/h2&gt;
&lt;p&gt;默认的配置文件在&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/usr/local/etc/cpolar/cpolar.yml
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;补充说明&#34;&gt;补充说明&lt;/h2&gt;
&lt;p&gt;使用过程中，我发现 cpolar 代理 http 导致了 rock 5A 的 cpu 占用飙升。后续我用了阿里云的服务器+frp 代理了 ssh,cloudflare tunnel 代理 http，cpu 占用几乎忽略不计。因此，建议 cpolar 内网穿透方案仅作备选。&lt;/p&gt;</description>
    </item>
    <item>
      <title>记录一次系统迁移</title>
      <link>https://qvqw.date/posts/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E7%B3%BB%E7%BB%9F%E8%BF%81%E7%A7%BB/</link>
      <pubDate>Thu, 11 Apr 2024 13:00:56 +0800</pubDate>
      <guid>https://qvqw.date/posts/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E7%B3%BB%E7%BB%9F%E8%BF%81%E7%A7%BB/</guid>
      <description>&lt;h1 id=&#34;记录一次系统迁移&#34;&gt;记录一次系统迁移&lt;/h1&gt;
&lt;p&gt;开发板为 rock 5a，使用的为 Debian 系统。最近买了一个香橙派 5plus 的 64G 的 emmc(和 rock5A 通用并且比官方的更便宜)，打算将系统从内存卡迁移到 emmc。&lt;/p&gt;
&lt;h2 id=&#34;查看当前磁盘情况&#34;&gt;查看当前磁盘情况&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;fdisk -l
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;得到新磁盘名字为/dev/mmcblk0,原内存卡设备为/dev/mmcblk1&lt;/p&gt;
&lt;h2 id=&#34;使用-dd-命令迁移-系统&#34;&gt;使用 dd 命令迁移 系统&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo dd if=/dev/mmcblk1 of=/dev/mmcblk0 bs=4M status=progress
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dd&lt;/code&gt;：待执行的命令，即复制和转换命令。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;if=/dev/mmcblk1&lt;/code&gt;：&lt;code&gt;if&lt;/code&gt; 表示输入文件（input file）。&lt;code&gt;/dev/mmcblk1&lt;/code&gt; 是源设备的文件路径，也就是数据的来源。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;of=/dev/mmcblk0&lt;/code&gt;：&lt;code&gt;of&lt;/code&gt; 表示输出文件（output file）。&lt;code&gt;/dev/mmcblk0&lt;/code&gt; 是目标设备的文件路径，也就是数据要写入的地方。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;bs=4M&lt;/code&gt;：&lt;code&gt;bs&lt;/code&gt; 表示块大小（block size）。设置为每次读写 4M 数据。设定一个适当的块大小可以提高数据的复制速度。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;status=progress&lt;/code&gt;：这是一个可选参数，它可以实时显示&lt;code&gt;dd&lt;/code&gt;命令的进度信息。这对于一些需要花费长时间的复制任务来说非常有用，可以让用户知道复制过程的进度。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;使用-parted-命令调整磁盘大小&#34;&gt;使用 parted 命令调整磁盘大小&lt;/h2&gt;
&lt;p&gt;如果不进行调整，系统可用大小还是默认的 32G&lt;/p&gt;
&lt;p&gt;先查看磁盘情况&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;parted /dev/mmcblk0 print  #查看指定设备的磁盘大小
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后我对第 3 个分区进行了调整，使其扩容到 emmc 最大能支持的容量&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;parted     /dev/mmcblk0    resizepart 3 100%
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;最后用 resize2f 命令调整文件系统大小&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
